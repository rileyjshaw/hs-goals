!function(){var e=function(e,i,o){this.width=e,this.height=i,this.id=o,this.score1=0,this.score2=0,this.scoreContainer=document.getElementById("scores"),this.scoreCounters=this.scoreContainer.childNodes,this.scoreCounter1=this.scoreCounters[0],this.scoreCounter2=this.scoreCounters[1],this.turn=0,this.moves=[],this.canvas=t(this,this.width,this.height,this.id,!0),document.body.insertBefore(this.canvas.element,this.scoreContainer),this.playerRadius=40,this.canvas.context.lineWidth=8,this.canvas.context.strokeStyle="#2c3e50",this.canvas.paintBoard()},t=function(e,t,i,o,n){var a,s,r,c,l,d,h,u,v;return(n||void 0===n)&&(HTMLCanvasElement.prototype.relativeMouseCoords=function(e){var t=0,i=0,o=0,n=0,a=this;do t+=a.offsetLeft-a.scrollLeft,i+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a);return o=e.pageX-t,n=e.pageY-i,{x:o,y:n}}),a=function(e){var n,a=document.createElement("canvas");return n=function(){var e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i},e||(e=n()),a.width=t*e,a.height=i*e,a.style.width=t+"px",a.style.height=i+"px",a.getContext("2d").setTransform(e,0,0,e,0,0),a.id=o,a},s=function(){v.clearRect(0,0,t,i)},r=function(t,i){v.moveTo(t-e.playerRadius,i-e.playerRadius),v.lineTo(t+e.playerRadius,i+e.playerRadius),v.moveTo(t-e.playerRadius,i+e.playerRadius),v.lineTo(t+e.playerRadius,i-e.playerRadius)},c=function(t,i){v.beginPath(),v.arc(t,i,e.playerRadius,0,2*Math.PI),v.stroke()},l=function(){s(),v.beginPath();for(var e=3;e>=0;e--)v.moveTo(t/3*e,0),v.lineTo(t/3*e,i),v.moveTo(0,i/3*e),v.lineTo(t,i/3*e);v.stroke(),v.closePath()},d=function(e){s(),v.fillStyle="#2c3e50",v.fillRect(0,0,t,i),v.fillStyle="#9b59b6",v.font="18px sans-serif",v.fillText(e,5,20)},u=a(),v=u.getContext("2d"),{element:u,context:v,clearCanvas:s,clickHandler:h,drawX:r,drawO:c,paintBoard:l,paintMessage:d}},i=function(e,t){var i=t.canvas.element.relativeMouseCoords(e),o=Math.floor(3*i.x/t.width),n=Math.floor(3*i.y/t.height),a=o+3*n;if("undefined"==typeof t.moves[a]){var s=t.width*(2*o+1)/6;yPixels=t.height*(2*n+1)/6,t.turn%2?(t.moves[a]=0,t.canvas.drawO(s,yPixels)):(t.moves[a]=1,t.canvas.drawX(s,yPixels)),t.canvas.context.stroke(),9===++t.turn&&(t.turn=0,t.moves=[],t.canvas.paintBoard())}};document.addEventListener("DOMContentLoaded",function(){var t=new e(400,400,"tictactoe");t.canvas.element.addEventListener("click",function(e){i(e,t)},!1)},!1)}(this);