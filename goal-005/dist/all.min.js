!function(){var e=function(e,i,o){this.width=e,this.height=i,this.id=o,this.score1=0,this.score2=0,this.scoreContainer=document.getElementById("scores"),this.scoreCounters=this.scoreContainer.childNodes,this.scoreCounter1=this.scoreCounters[0],this.scoreCounter2=this.scoreCounters[1],this.turn=0,this.moves=[],this.canvas=t(this,this.width,this.height,this.id,!0),document.body.insertBefore(this.canvas.element,this.scoreContainer),this.playerRadius=40,this.canvas.context.lineWidth=8,this.canvas.context.strokeStyle="#2c3e50",this.canvas.paintBoard()},t=function(e,t,i,o,n){var s,a,r,c,l,d,h,u,f;return(n||void 0===n)&&(HTMLCanvasElement.prototype.relativeMouseCoords=function(e){var t=0,i=0,o=0,n=0,s=this;do t+=s.offsetLeft-s.scrollLeft,i+=s.offsetTop-s.scrollTop,s=s.offsetParent;while(s);return o=e.pageX-t,n=e.pageY-i,{x:o,y:n}}),s=function(e){var n,s=document.createElement("canvas");return n=function(){var e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i},e||(e=n()),s.width=t*e,s.height=i*e,s.style.width=t+"px",s.style.height=i+"px",s.getContext("2d").setTransform(e,0,0,e,0,0),s.id=o,s},a=function(){f.clearRect(0,0,t,i)},r=function(t,i){f.moveTo(t-e.playerRadius,i-e.playerRadius),f.lineTo(t+e.playerRadius,i+e.playerRadius),f.moveTo(t-e.playerRadius,i+e.playerRadius),f.lineTo(t+e.playerRadius,i-e.playerRadius)},c=function(t,i){f.beginPath(),f.arc(t,i,e.playerRadius,0,2*Math.PI),f.stroke()},l=function(){a(),f.beginPath();for(var e=3;e>=0;e--)f.moveTo(t/3*e,0),f.lineTo(t/3*e,i),f.moveTo(0,i/3*e),f.lineTo(t,i/3*e);f.stroke(),f.closePath()},d=function(e){a(),f.fillStyle="#2c3e50",f.fillRect(0,0,t,i),f.fillStyle="#9b59b6",f.font="18px sans-serif",f.fillText(e,5,20)},h=function(o){var n=u.relativeMouseCoords(o),s=Math.floor(3*n.x/t),a=Math.floor(3*n.y/i),d=s+3*a;if("undefined"==typeof e.moves[d]){var h=t*(2*s+1)/6;yPixels=i*(2*a+1)/6,e.turn%2?(e.moves[d]=0,c(h,yPixels)):(e.moves[d]=1,r(h,yPixels)),f.stroke(),9===++e.turn&&(e.turn=0,e.moves=[],l())}},u=s(),f=u.getContext("2d"),{element:u,context:f,clearCanvas:a,clickHandler:h,drawX:r,drawO:c,paintBoard:l,paintMessage:d}};document.addEventListener("DOMContentLoaded",function(){var t=new e(400,400,"tictactoe");t.canvas.element.addEventListener("click",t.canvas.clickHandler,!1)},!1)}(this);